<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ratings</title>
    <link rel="stylesheet" href="global.css">
    <style>
        
/* ====== RESET ====== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, sans-serif;
}

body {
    background: #f9f9fc;
    color: #333;
}

/* ====== NAVBAR ====== */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
    padding: 10px 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.navbar ul {
    display: flex;
    list-style: none;
    gap: 20px;
}

.navbar ul li a {
    text-decoration: none;
    color: #555;
    font-weight: 500;
    padding: 8px 12px;
    border-radius: 6px;
    transition: background 0.3s;
}

.navbar ul li a:hover,
.navbar ul li a.active {
    background: #eef3ff;
    color: #000;
}

.logout-btn {
    background: #4a6cf7;
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.logout-btn:hover {
    background: #3a5de0;
}

/* ====== HEADER ====== */
.header {
    font-size: 24px;
    font-weight: 600;
    margin: 20px;
}


/* ====== SECTIONS ====== */
.section {
    background: #fff;
    margin: 20px;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.section h2 {
    font-size: 20px;
    margin-bottom: 15px;
}

/* ====== CARDS ====== */
.analytics-container {
    display: flex;
    gap: 20px;
    margin: 20px;
}

.analytics-card {
    flex: 1;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.analytics-card.blue { background: #e8f0ff; }
.analytics-card.green { background: #e8f8e8; }

.analytics-card h3 {
    margin-bottom: 10px;
    font-size: 18px;
}

.analytics-card p {
    font-size: 14px;
    margin: 5px 0;
}

/* ====== PATIENT LIST ====== */
.patient-item {
    display: flex;
    justify-content: space-between;
    padding: 10px;
    border-bottom: 1px solid #eee;
}

.patient-item:last-child {
    border-bottom: none;
}

.editable {
    cursor: pointer;
    background: #eef3ff;
    padding: 5px 10px;
    border-radius: 6px;
}

.editable:hover {
    background: #dce6ff;
}

/* ====== BUTTONS ====== */
.button, .submit-btn {
    background: #4a6cf7;
    color: #fff;
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-top: 10px;
}

.button:hover, .submit-btn:hover {
    background: #3a5de0;
}

/* ====== INPUTS & TEXTAREA ====== */
input, select, textarea {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border: 1px solid #ddd;
    border-radius: 6px;
}

/* ====== RATING STARS ====== */
.rating-stars span {
    font-size: 24px;
    cursor: pointer;
    color: #ccc;
}
button{
  
/* ====== BUTTON DESIGN ====== */
    display: inline-block;
    background: #4a6cf7; /* Couleur principale */
    color: #fff; /* Texte blanc */
    padding: 10px 20px; /* Espacement interne */
    border: none; /* Pas de bordure */
    border-radius: 8px; /* Coins arrondis */
    font-size: 16px; /* Taille du texte */
    font-weight: 500; /* Texte semi-gras */
    cursor: pointer; /* Curseur main */
    transition: all 0.3s ease; /* Animation douce */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Ombre légère */
}

/* Effet au survol */
.button:hover,
.submit-btn:hover,
.logout-btn:hover,
.download-btn:hover {
    background: #3a5de0; /* Couleur plus foncée */
    transform: translateY(-2px); /* Légère élévation */
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15); /* Ombre plus prononcée */
}

/* Effet au clic */
.button:active,
.submit-btn:active,
.logout-btn:active,
.download-btn:active {
    transform: translateY(0); /* Retour à la position normale */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Bouton désactivé */
.button:disabled,
.submit-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    box-shadow: none;
}


.rating-stars span.active {
    color: gold;
}

/* ====== REPORT ITEMS ====== */
.report-item, .rating-item {
    background: #fff;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.report-item h3, .rating-item strong {
    font-size: 18px;
    margin-bottom: 8px;
}

.report-item p, .rating-item p {
    font-size: 14px;
    color: #555;
}

    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <ul>
            <a href="docterdascbord.html" class="active">Patients</a>
            <a href="analystic.html">Analytics</a>
            <a href="medical.html">Reports</a>
            <a href="chatwp.html">Chat Parents</a>
            <a href="rating.html">Ratings</a>
        </ul>
        <div>
            <span id="doctor-name"></span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- Header -->
    <h1 class="header">Create New Rating</h1>

    <!-- Rating Form -->
    <div class="section">
        <label>Select Child</label>
        <select id="child-select"></select>

        <label>Rating Type</label>
        <div>
            <button type="button">Weekly Rating</button>
            <button type="button">15-Day Progress</button>
        </div>

        <label>Weekly Performance (1-5 stars)</label>
        <div class="rating-stars" id="stars">
            <span data-value="1">&#9733;</span>
            <span data-value="2">&#9733;</span>
            <span data-value="3">&#9733;</span>
            <span data-value="4">&#9733;</span>
            <span data-value="5">&#9733;</span>
        </div>

        <label>Notes & Observations</label>
        <textarea id="notes" placeholder="Enter detailed observations..."></textarea>

        <button class="submit-btn" onclick="submitRating()">Submit Weekly Rating</button>
    </div>

    <!-- Recent Ratings -->
    <div class="section">
        <h2>Recent Ratings</h2>
        <div id="ratings-list"></div>
    </div>

    <script>
        let selectedStars = 0;

        document.addEventListener("DOMContentLoaded", () => {
            const name = localStorage.getItem('userName') || "Doctor";
            document.getElementById('doctor-name').innerText = "Dr. " + name;

            // Charger les patients depuis LocalStorage
            const patients = JSON.parse(localStorage.getItem('patientsData')) || [];
            const select = document.getElementById('child-select');
            patients.forEach(p => {
                const option = document.createElement('option');
                option.value = p.name;
                option.textContent = p.name;
                select.appendChild(option);
            });

            // Charger les ratings existants
            displayRatings();

            // Gestion des étoiles
            document.querySelectorAll("#stars span").forEach(star => {
                star.addEventListener("click", () => {
                    selectedStars = parseInt(star.dataset.value);
                    document.querySelectorAll("#stars span").forEach(s => s.classList.remove("active"));
                    for (let i = 0; i < selectedStars; i++) {
                        document.querySelectorAll("#stars span")[i].classList.add("active");
                    }
                });
            });
        });

        function submitRating() {
            const child = document.getElementById('child-select').value;
            const notes = document.getElementById('notes').value;
            const date = new Date().toLocaleDateString();

            if (!child || selectedStars === 0 || !notes) {
                alert("Please fill all fields and select stars");
                return;
            }

            const rating = {
                child,
                stars: selectedStars,
                notes,
                date
            };

            let ratings = JSON.parse(localStorage.getItem('ratingsData')) || [];
            ratings.push(rating);
            localStorage.setItem('ratingsData', JSON.stringify(ratings));

            displayRatings();

            // Reset form
            document.getElementById('notes').value = "";
            selectedStars = 0;
            document.querySelectorAll("#stars span").forEach(s => s.classList.remove("active"));
        }

        function displayRatings() {
            const ratings = JSON.parse(localStorage.getItem('ratingsData')) || [];
            const list = document.getElementById('ratings-list');
            list.innerHTML = "";
            ratings.forEach(r => {
                const div = document.createElement('div');
                div.className = "rating-item";
                div.innerHTML = `
                    <strong>${r.child}</strong> - Weekly Rating (${r.date})<br>
                    ${r.notes}<br>
                    ${"&#9733;".repeat(r.stars)}${"&#9734;".repeat(5 - r.stars)}
                `;
                list.appendChild(div);
            });
        }

        function logout() {
            localStorage.clear();
            window.location.href = "index.html";
        }
    </script>
</body>
</html>